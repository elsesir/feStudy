function Pubsub(){this.handlers={}}Pubsub.prototype={on:function(n,o){var l=this;return n in l.handlers||(l.handlers[n]=[]),l.handlers[n].push(o),this},emit:function(n){for(var o=this,l=Array.prototype.slice.call(arguments,1),u=0;u<o.handlers[n].length;u++)o.handlers[n][u].apply(o,l);return o},off:function(n,o){var l=this.handlers[n],u=0;if(l){u=l.length;for(var s=0;s<u;s++)l[s]===o&&l.splice(s,1)}return this}};var pubsub=new Pubsub,callback=function(n){console.log("callback"+n)};function Person(){this.name="a"}pubsub.on("A",function(n){console.log(1+n)}),pubsub.on("A",function(n){console.log(2+n)}),pubsub.on("A",callback),pubsub.on("B",callback),pubsub.emit("A","我是第一次触发A的参数"),pubsub.off("A",callback),pubsub.emit("A","我是第二次触发事件时的参数"),pubsub.emit("B","我是B事件的参数"),Person.prototype=function(){console.log("walk")};var Child=new Person;Child.walk=function(){console.log("child walk")},Child.walk();